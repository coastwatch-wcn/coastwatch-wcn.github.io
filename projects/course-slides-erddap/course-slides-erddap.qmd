---
title: "Automated Access to Password-Protected ERDDAP Datasets"
anchor-sections: false
format:
  html:
    theme: lux
    toc: false
    page-layout: full
    css: ../../styles.css
---

This project demonstrates a **non-traditional use of ERDDAP**: not just as a public data portal, but as a **secure, searchable database + image server** that can feed an end-to-end automation workflow. Authorized users can query participant metadata from NOAA CoastWatch satellite training courses, download the matching **slide PNGs**, and automatically assemble a **custom PowerPoint deck**—all while keeping personally identifiable information (PII) protected behind authentication.

Importantly, the tutorials associated with this project are designed so users can adapt this workflow to **their own password-protected ERDDAP datasets**, not just the CoastWatch example shown here.

## Why this matters: access control + automation don’t usually mix

ERDDAP is commonly used for **open discovery and reuse** (public datasets, anonymous access). But some datasets must be restricted—especially when they contain **PII**, internal reporting metrics, or unpublished materials.

Manual login works for interactive browsing, but becomes a blocker for reproducible scripts and automated reporting.

This project shows a practical pattern for bridging that gap:

> **Interactive browser login once → authenticated scripted access for the rest of the workflow.**

## The CoastWatch “slide archive” problem (and the ERDDAP solution)

### Then
- Slides scattered across shared drives/folders  
- Inconsistent naming and organization  
- Manual discovery (slow, error-prone, and knowledge-dependent)  
- Difficult to summarize course impact across years  

### Now
- Slides and metadata hosted in ERDDAP  
- Fully searchable by **course, year, affiliation, products, topics, software**, etc.  
- Slide IDs link metadata to image files  
- “Find participant work instantly” → supports reporting + impact documentation  

Over **250 participant slides** have been collected since 2013 (and growing).

## ERDDAP used in nonconventional ways

### 1) ERDDAP as a searchable database (metadata)

A password-protected **tabledap** dataset acts like a structured, queryable registry of participant information and slide IDs.

Instead of just serving environmental measurements, ERDDAP here functions as:

- A relational-style metadata store  
- A searchable reporting backend  
- A structured index for downstream automation  

### 2) ERDDAP as an authenticated image server

A second dataset indexes a folder of PNG slide files and exposes them through predictable URLs.

Once authenticated, scripts can:

- Construct file URLs dynamically from Slide IDs  
- Retrieve slide PNGs directly  
- Batch-download content for automated reporting  

This transforms ERDDAP from a “data API” into a **controlled asset distribution system**.

## How secure access is implemented

### Server-side configuration

ERDDAP is configured for:

- **Google-based authentication**
- **Role-based dataset access**
- Dataset-level permission control

Users:
1. Log in using NOAA-authorized Google accounts  
2. Are assigned roles within ERDDAP  
3. Gain access only to approved datasets  

No credentials are stored in scripts.

## Selenium: bridging interactive login with automation

Because the metadata and slide datasets contain PII, they cannot be accessed anonymously.

Instead, this workflow uses **Selenium WebDriver** to automate the browser login process safely and reproducibly.

### What Selenium does in this project

1. Opens a Chrome browser window from Python  
2. Navigates to the ERDDAP login page  
3. User completes:
   - Google login
   - 2-factor authentication
   - ERDDAP confirmation step  
4. Script extracts the authenticated **session cookies** from the browser  
5. Cookies are transferred into a `requests.Session()` object  
6. The browser closes  
7. All subsequent downloads use that authenticated session  

### Why this matters

- ✔ No passwords are stored in code  
- ✔ Authentication uses NOAA identity systems  
- ✔ Scripts can access protected datasets securely  
- ✔ The workflow remains reproducible  

This pattern allows **human authentication + machine automation** to coexist.

### Why not use API tokens?

For identity-managed ERDDAP systems (like NOAA’s), login is often federated via Google OAuth rather than static API keys. Selenium allows us to integrate that identity-based login into Python workflows without bypassing security.

## Data sources hosted in ERDDAP

### Participant metadata (CSV → ERDDAP tabledap)

Fields include:

- Course / Year  
- Name / Affiliation  
- Products  
- Topic  
- Software  
- Slide ID (key that links metadata to slide image)

### Participant slides (PNG files → ERDDAP file index)

A directory of PNG slides with a consistent naming pattern:

```
[Year][Course][Number].png
```

ERDDAP exposes these files via predictable URLs, allowing programmatic download after authentication.

## End-to-end workflow (Query → PowerPoint)

### Step 1 — Authenticate once (Selenium)

Interactive login → session cookies → authenticated `requests.Session()`.

### Step 2 — Query metadata (ERDDAP tabledap)

Two supported approaches:

**Option 1**
- Download full metadata table
- Filter locally in Python
- Maximum flexibility and automation

**Option 2**
- Use ERDDAP web interface to subset
- Generate query URL visually
- Download filtered CSV directly

Both approaches produce the same metadata table.

Example query used in the showcase:

> “NMFS participants who used JPSS data”

### Step 3 — Construct slide URLs

Slide IDs from metadata are converted into image URLs pointing to the slide archive.

### Step 4 — Parallel image download

Slides are downloaded through the authenticated session.

Parallel downloads (ThreadPoolExecutor) significantly reduce runtime when retrieving dozens of slides.

### Step 5 — Generate PowerPoint

Using `python-pptx`:

- Each participant slide PNG becomes one PowerPoint slide  
- Title text is dynamically constructed from metadata fields  
- Layout and formatting are standardized  
- Output is a ready-to-use `.pptx` file  

Result:

> A fully customized, query-driven presentation built directly from ERDDAP.

## What this enables

Authorized users can generate:

- Course impact summaries  
- Program reviews by year or affiliation  
- Thematic decks (e.g., “Ocean Color + Telemetry projects”)  
- Internal reporting materials  
- Briefing-ready slide decks  

All without manually searching folders.

## Strengths and limitations

### Strengths

- Uses existing ERDDAP infrastructure  
- Secure identity-based access  
- No stored credentials  
- Reproducible + auditable  
- Demonstrates ERDDAP versatility beyond environmental grids  

### Limitations

- Requires interactive login (Selenium)  
- Not fully headless unless extended  
- Sensitive to ERDDAP dataset restructuring  
- Depends on role-based permissions being configured correctly  

## Why ERDDAP versatility matters

This project is a blueprint for other secure workflows:

- Internal asset archives  
- Image repositories  
- Metadata registries  
- Protected environmental products  
- Program tracking dashboards  

It demonstrates that ERDDAP can function as:

- A data API  
- A metadata database  
- A file server  
- A reporting backend  

Not just a public data catalog.

## Tutorials: Apply this to your own protected datasets

The Python and R tutorials associated with this project are written so that users can:

- Replace the CoastWatch dataset with their own  
- Use Selenium-based authentication for their own protected ERDDAP instance  
- Query metadata securely  
- Retrieve files programmatically  
- Build automated reporting workflows  

The CoastWatch slide archive is simply a **real-world example** of the pattern.


## Resources

### Project Presentation  
**ERDDAP Non-Conventional Use Case Showcase**  
[View Slides (PDF)](path/to/presentation.pdf)


### Python Tutorial  
**Generate PowerPoint from ERDDAP Metadata**  
[Open Python Tutorial](path/to/python/tutorial)


### R Tutorial  
**Generate PowerPoint from ERDDAP Metadata**  
[Open R Tutorial](path/to/r/tutorial)



## Credits / Acknowledgements

Madison Richardson, Sunny Hospital, Dale Robinson, Cara Wilson, Roy Mendelssohn.  
CoastWatch West Coast Node & PolarWatch, SWFSC, CoastWatch Central, and JPSS PGRR Program support.